<div class="p-6 space-y-8">
  <h2 class="text-2xl font-bold mb-4">Master List</h2>

  <app-master-form #masterForm (saved)="loadMasters()"></app-master-form>

  <div *ngIf="loading" class="text-gray-500">Загрузка...</div>

  <table class="min-w-full border border-gray-300">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-2 border">№</th>
        <th class="p-2 border">Дата</th>
        <th class="p-2 border">Сумма</th>
        <th class="p-2 border">Примечание</th>
        <th class="p-2 border">Действия</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let m of masters" class="hover:bg-gray-50">
        <td class="border p-2">{{ m.number }}</td>
        <td class="border p-2">{{ m.date | dateFormat }}</td>
        <td class="border p-2">{{ m.sum }}</td>
        <td class="border p-2">{{ m.note }}</td>
        <td class="border p-2">
          <button
            class="cursor-pointer bg-yellow-500 text-white px-2 py-1 rounded mr-1"
            (click)="editMaster(m)"
          >
            Редактировать
          </button>
          <button
            class="cursor-pointer bg-blue-500 text-white px-2 py-1 rounded mr-1"
            (click)="selectMaster(m)"
          >
            Открыть
          </button>
          <button
            class="cursor-pointer bg-red-500 text-white px-2 py-1 rounded"
            (click)="deleteMaster(m.id!)"
          >
            Удалить
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="selectedMaster" class="mt-6 border-t pt-4">
    <app-detail-list [master]="selectedMaster" (changed)="loadMasters()"></app-detail-list>
  </div>
</div>
